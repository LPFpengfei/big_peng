<%# 管理端用户表单页面 %>
<%= form_with model: @user, url: @user.new_record? ? admin_users_path : admin_user_path(@user), method: @user.new_record? ? :post : :patch, local: true do |f| %>
  <!-- 昵称 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :nickname, "昵称", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_field :nickname, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @user.errors[:nickname].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @user.errors[:nickname].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 邮箱 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :email, "邮箱", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.email_field :email, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @user.errors[:email].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @user.errors[:email].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 密码 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :password, @user.new_record? ? "密码" : "新密码（可选）", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.password_field :password, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @user.errors[:password].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @user.errors[:password].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 确认密码 -->
  <div style="margin-bottom: 20px;">
    <%= f.label :password_confirmation, @user.new_record? ? "确认密码" : "确认新密码（可选）", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.password_field :password_confirmation, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @user.errors[:password_confirmation].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @user.errors[:password_confirmation].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 提交按钮 -->
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" onclick="closeModal()">
      取消
    </button>
    <%= f.submit class: "btn" %>
  </div>
<% end %>