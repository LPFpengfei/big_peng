<%# 管理端图书表单页面 %>
<%= form_with model: @book, url: @book.new_record? ? admin_books_path : admin_book_path(@book), method: @book.new_record? ? :post : :patch, local: true do |f| %>
  <!-- 标题 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :title, "标题", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_field :title, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @book.errors[:title].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:title].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 作者 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :author, "作者", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_field :author, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @book.errors[:author].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:author].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 分类 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :category_id, "分类", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.collection_select :category_id, Category.all, :id, :name, { include_blank: "未分类" }, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @book.errors[:category_id].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:category_id].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 描述 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :description, "描述", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_area :description, rows: 4, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; resize: vertical;" %>
    <% if @book.errors[:description].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:description].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 封面图片 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :cover_image, "封面图片URL", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_field :cover_image, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @book.errors[:cover_image].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:cover_image].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 文件路径 -->
  <div style="margin-bottom: 16px;">
    <%= f.label :file_path, "文件路径", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_field :file_path, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @book.errors[:file_path].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:file_path].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 来源 -->
  <div style="margin-bottom: 20px;">
    <%= f.label :source, "来源", style: "display: block; margin-bottom: 4px; font-weight: bold;" %>
    <%= f.text_field :source, style: "width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" %>
    <% if @book.errors[:source].any? %>
      <div style="color: #d32f2f; font-size: 12px; margin-top: 4px; display: block;">
        <%= @book.errors[:source].to_sentence %>
      </div>
    <% end %>
  </div>

  <!-- 提交按钮 -->
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" onclick="closeModal()">
      取消
    </button>
    <%= f.submit class: "btn" %>
  </div>
<% end %>