<!DOCTYPE html>
<html>
  <head>
    <title>后台管理系统</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: #f5f5f5; color: #333; }

      /* 左侧菜单布局 */
      .admin-wrapper { display: flex; min-height: 100vh; }

      /* 左侧菜单 */
      .sidebar {
        width: 240px;
        background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
        color: #e5e7eb;
        padding: 20px 0;
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        overflow-y: auto;
        box-shadow: 2px 0 8px rgba(0,0,0,0.1);
      }

      .sidebar .brand {
        font-size: 16px;
        font-weight: 700;
        padding: 16px 16px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
      }

      .sidebar .user-box {
        padding: 12px 16px;
        margin: 12px 8px;
        background: rgba(255,255,255,0.05);
        border-radius: 6px;
      }

      .sidebar .user-name { font-weight: 600; font-size: 14px; }
      .sidebar .user-email { font-size: 12px; color: #9ca3af; margin-top: 4px; }

      .sidebar nav { padding: 8px; }

      .sidebar a {
        display: block;
        padding: 10px 12px;
        color: #e5e7eb;
        text-decoration: none;
        border-radius: 6px;
        margin: 4px;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
      }

      .sidebar a:hover {
        background: rgba(255,255,255,0.08);
        border-left-color: #3b82f6;
      }

      .sidebar a.active {
        background: #3b82f6;
        color: white;
        border-left-color: #60a5fa;
      }

      .sidebar .spacer { flex: 1; }

      .sidebar .logout { color: #fca5a5; }
      .sidebar .logout:hover { background: rgba(239, 68, 68, 0.15); }

      /* 主内容区域 */
      .main-wrapper {
        margin-left: 240px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .topbar {
        height: 56px;
        background: white;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        align-items: center;
        padding: 0 24px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      }

      .topbar h1 { font-size: 18px; color: #1f2937; margin: 0; font-weight: 600; }

      .content-area {
        flex: 1;
        padding: 24px;
        overflow-y: auto;
      }

      /* 提示信息 */
      .alert {
        padding: 12px 16px;
        margin-bottom: 16px;
        border-radius: 6px;
        border-left: 4px solid;
      }

      .alert-notice {
        background: #f0fdf4;
        color: #166534;
        border-left-color: #22c55e;
      }

      .alert-alert {
        background: #fef2f2;
        color: #991b1b;
        border-left-color: #ef4444;
      }

      /* 按钮 */
      .btn {
        display: inline-block;
        padding: 8px 14px;
        background: #3b82f6;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn:hover { background: #2563eb; }
      .btn-danger { background: #ef4444; }
      .btn-danger:hover { background: #dc2626; }

      /* 表格 */
      table {
        width: 100%;
        background: white;
        border-collapse: collapse;
        border-radius: 6px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      }

      th, td {
        padding: 12px 16px;
        text-align: left;
        border-bottom: 1px solid #f3f4f6;
      }

      th {
        background: #f9fafb;
        color: #374151;
        font-weight: 600;
      }

      /* 表单 */
      .form-group { margin-bottom: 16px; }
      .form-group label {
        display: block;
        margin-bottom: 6px;
        font-weight: 600;
        color: #374151;
      }

      .form-group input {
        width: 100%;
        padding: 10px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        box-sizing: border-box;
      }

      .form-errors {
        background: #fef2f2;
        color: #991b1b;
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 16px;
        border-left: 4px solid #ef4444;
      }

      /* 卡片 */
      .card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      }

      /* 响应式 */
      @media (max-width: 768px) {
        .sidebar { width: 200px; }
        .main-wrapper { margin-left: 200px; }
      }
    </style>
  </head>

  <body>
    <% if current_admin %>
      <div class="admin-wrapper">
        <!-- 左侧菜单 -->
        <aside class="sidebar">
          <div class="brand">后台管理系统</div>
          <div class="user-box">
            <div class="user-name"><%= current_admin.name.presence || "管理员" %></div>
            <div class="user-email"><%= current_admin.email %></div>
          </div>
          <nav>
            <%= link_to "管理员管理", admin_admins_path, class: ["nav-link", (current_page?(admin_admins_path) ? "active" : nil)].compact.join(" ") %>
          </nav>
          <div style="flex: 1;"></div>
          <nav style="padding-bottom: 12px;">
            <%= link_to "退出登录", admin_logout_path, data: { turbo_method: :delete }, class: "logout" %>
          </nav>
        </aside>

        <!-- 主内容区域 -->
        <div class="main-wrapper">
          <div class="topbar">
            <h1>控制台</h1>
          </div>
          <div class="content-area">
            <% if notice %>
              <div class="alert alert-notice"><%= notice %></div>
            <% end %>

            <% if alert %>
              <div class="alert alert-alert"><%= alert %></div>
            <% end %>

            <%= yield %>
          </div>
        </div>
      </div>
    <% else %>
      <%= yield %>
    <% end %>
  </body>
</html>
